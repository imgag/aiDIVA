## aiDIVA -- augmented intelligence-based disease variant analysis
# Configuration file specifiying all the parameters that are needed to run aiDIVA in the different modes
# if you modify the key names make sure to also update them in the run_aiDIVA.py script
---
# used assembly build, valid values: [GRCh37, GRCh38]
Assembly-Build: GRCh38
Canonical-Transcripts: <full-path-to-file>/mane_grch38_v13_transcript_ids.txt


Analysis-Input:
    # path to the reference assembly used during the expansion of the indels
    # hg19 instead of GRCh37 or hg38 instead of GRCh38 can also be used the differences between them should not matter here
    ref-path: <full-path-to-reference>/GRCh38.fa

    # trained scoring models used to predict the pathogenicity score
    # if no trained model is present you can use the train_model.py script to train a new custom model
    # If you train your own models make sure to set the full path here, also if you save the models not in "aiDIVA/data/prediction_models/"
    scoring-model: <full-path-to-model>/aidiva-rf_pretrained_scikit132.pkl.gz

    prioritization-information:
        # Identifier to get the score from the annotated file
        cadd-identifier: CADD_PHRED
        repeat-identifier: simpleRepeat
        duplication-identifier: segmentDuplication

    # Weights are used in the prioritization step
    # You can change these weights, but make sure that they sum up to 1.0
    # The default values were obtained through a simple weight optimization
    prioritization-weights:
        pathogenicity-weight: 0.34
        hpo-weight: 0.65
        hpo-interacting-weight: 0.01


LLM-Input:
    llm-api: LOCAL # (LOCAL, OPENAI)

    llm-api-url: http://127.0.0.1 # URL for the locally hosted LLM
    llm-api-port: 8000 # port for the locally hosted LLM

    # API key used to access the LLM API (OpenAI/MistralAI API)
    llm-api-key: <full-path-to-file>/OPENAI_API_KEY.txt # leave blank if a local model is used

    # 
    meta-model: <full-path-to-file>/aidiva-meta_pretrained_scikit132.pkl.gz
    meta-model-rf: <full-path-to-file>/aidiva-meta-rf_pretrained_scikit132.pkl.gz
    
    # specify the LLM model that the api should call (gpt-4o directs to the latest model)
    llm-model: "gpt-4o" #("meta/llama-3.1-70b-instruct", "meta/llama-3.1-8b-instruct", "gpt-4o")

    # system instructions for the LLM
    # enable reasoning in the system intructions by adding 'Advanced reasoning ON'
    llm-instruction: |
        Here you can write the system instructions for the LLM.
        They can span multiple rows and the linebreaks are preserved.


Model-Features:
    # List containing the names of the allele frequency sources (populations) that are present in the data set (the MaxAF will be based on these)
    allele-frequency-list:
        - gnomAD_AFR_AF
        - gnomAD_AMR_AF
        - gnomAD_EAS_AF
        - gnomAD_NFE_AF
        - gnomAD_SAS_AF
        #- gnomAD_ASJ_AF
        #- gnomAD_FIN_AF
        #- gnomAD_OTH_AF

    # List containing the names of the features used for the model training
    # the exact order of the features is crucial (make sure to have the exact same order as in the training step)
    feature-list:
        - SIFT
        - PolyPhen
        - CADD_PHRED
        - REVEL
        - MAX_AF
        - EIGEN_PHRED
        - CONDEL
        - FATHMM_XF
        - MutationAssessor
        - phastCons_mammal
        - phastCons_primate
        - phastCons_vertebrate
        - phyloP_mammal
        - phyloP_primate
        - phyloP_vertebrate
        - oe_lof
        #- oe_mis
        #- oe_syn
        - homAF
        - CAPICE
        - ALPHA_MISSENSE_SCORE
        - HIGH_IMPACT
        - IS_INDEL


Annotation-Resources:
    # VEP: path to the VEP executable
    vep: <full-path-to-folder>/ensembl-vep-release/vep

    vep-cpan: <full-path-to-folder>/perl_cpan/

    vep-plugin-path: <full-path-to-folder>/vep_plugins/

    # VEP cache directory
    vep-cache: <full-path-to-folder>/ensembl-vep/cache

    # ngs-bits install path
    ngs-bits: <full-path-to-folder>/ngs-bits/

    # low-confidence filter file
    low-confidence: <full-path-to-file>/grch37_low_conf_regions.bed

    # BED like files here the key of the dictionary is used as the name to present the feature in the annotated file
    bed-files:
        simpleRepeat: <full-path-to-file>/grch37_simpleRepeat.bed
        segmentDuplication: <full-path-to-file>/grch37_genomicSuperDups.bed
        oe_lof: <full-path-to-file>/gnomAD_oe_lof_sorted.bed
        oe_mis: <full-path-to-file>/gnomAD_oe_mis_grch38_sorted.bed
        oe_syn: <full-path-to-file>/gnomAD_oe_syn_grch38_sorted.bed
        repeatMasker: <full-path-to-file>/grch37_repeatmasker.bed
        
        # OPTIONAL: only used if DB check is not skipped
        # NOTE: currently not implemented
        # NOTE: the following annotation needs a valid license
        omim: <full-path-to-file>/omim.bed

    plugin-files:
        AlphaMissense: <full-path-to-file>/AlphaMissense_hg38.tsv.gz

    # VCF files the key of the dictionary is used to identify the feature in the INFO column of hte VCF file
    vcf-files:
        EIGEN_PHRED: <full-path-to-file>/grch38_eigen_phred_coding.vcf.gz
        CONDEL: <full-path-to-file>/grch38_fannsDB_Condel.vcf.gz
        FATHMM_XF: <full-path-to-file>/grch38_fathmm_xf_coding.vcf.gz
        MutationAssessor: <full-path-to-file>/grch38_precomputed_MutationAssessor.vcf.gz
        gnomAD: <full-path-to-file>/grch38_gnomad_genome_v3.1.2.vcf.gz
        CADD: <full-path-to-file>/grch38_CADD_snvs_v16.vcf.gz
        CAPICE: <full-path-to-file>/capice_v1_grch38_snvs.vcf.gz
        REVEL: <full-path-to-file>/grch38_revel_v13.vcf.gz
        SpliceAI-SNV: <full-path-to-file>/spliceai_scores.masked.snv.hg38.vcf.gz
        SpliceAI-InDel: <full-path-to-file>/spliceai_scores.masked.indel.hg38.vcf.gz
        
        # OPTIONAL: only used if DB check is not skipped
        clinvar: <full-path-to-file>/clinvar.vcf.gz
        
        # OPTIONAL: only used if DB check is not skipped
        # NOTE: the following annotation needs a valid license
        hgmd: <full-path-to-file>/HGMD.vcf.gz

    # Bigwig files the key of the dictionary is used as the name to present the feature in the annotated file
    bigwig-files:
        phastCons_primate: <full-path-to-file>/hg38_phastCons17way_primate.bw
        phastCons_mammal: <full-path-to-file>/hg38_phastCons30way_mammal.bw
        phastCons_vertebrate: <full-path-to-file>/hg38_phastCons100way_vertebrate.bw
        phyloP_primate: <full-path-to-file>/hg38_phyloP17way_primate.bw
        phyloP_mammal: <full-path-to-file>/hg38_phyloP30way_mammal.bw
        phyloP_vertebrate: <full-path-to-file>/hg38_phyloP100way_vertebrate.bw


# DO NOT CHANGE THE FOLLOWING IF YOU DON'T KNOW WHAT YOU DO
# In case you change the following parameters (eg. if you recomputed the hpo resources) make sure to specify the full path to the newly created resources
Internal-Parameters:
    gene2hpo-mapping: ../../data/hpo_resources/gene2hpo.json
    gene2interacting-mapping: ../../data/hpo_resources/gene2interacting.json
    transcript2length-mapping: ../../data/hpo_resources/grch38transcript2length.json
    hgnc2gene-mapping: ../../data/hpo_resources/hgnc2gene.json
    hpo-graph: ../../data/hpo_resources/hpo_graph.gexf
    hpo2replacement-mapping: ../../data/hpo_resources/hpo2replacement.json
    hpo2name-mapping: ../../data/hpo_resources/hpo2name.json
